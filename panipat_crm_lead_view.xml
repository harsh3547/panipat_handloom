<?xml version="1.0"?>
<openerp>
    <data>
        <!-- CRM Lead Form View  -->
        <record model="ir.ui.view" id="crm_case_form_view_leads">
        <field name="name">CRM - Leads Form</field>
        <field name="model">panipat.crm.lead</field>
        <field name="arch" type="xml">
            <form string="Leads Form">
                <header>
                    <button name="%(action_crm_lead)d" string="Confirm and Allocate" type="action" class="oe_highlight"/>
                </header>
                <sheet>
                    <div >
                       	<group> 
                       		<group>
                       			<label for="sequence" class="oe_edit_only"/>
                       			<h2><field name="sequence" readonly="1" /></h2>
                       		</group>
                       		<group>
                       			<label for="create_date" class="oe_edit_only"/>
                       			<h2><field name="create_date"/></h2>
                       		</group>
                       	</group>
                       	<label for="name" class="oe_edit_only"/>
                       	<h1><field name="name" placeholder="Describe the lead..."/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="partner_name" string="Company Name"/>
                            <!-- Preload all the partner's information -->
                            <field name="partner_id" string="Customer"
                                on_change="on_change_partner_id(partner_id)"
                                options='{"create_name_field": "name"}'
                                context="{'default_name': contact_name, 'default_street': street, 'default_city': city, 'default_state_id': state_id, 'default_zip': zip, 'default_country_id': country_id, 'default_phone': phone, 'default_mobile': mobile, 'default_fax': fax, 'default_email': email_from, 'default_user_id': user_id,}"/>
                            <label for="street" string="Address"/>
                            <div>
                                <field name="street" placeholder="Street..."/>
                                <field name="street2"/>
                                <div class="address_format">
                                    <field name="city" placeholder="City" style="width: 40%%"/>
                                    <field name="state_id" on_change="onchange_state(state_id)" options='{"no_open": True}' placeholder="State" style="width: 24%%"/>
                                    <field name="zip" placeholder="ZIP" style="width: 34%%"/>
                                </div>
                                <field name="country_id" placeholder="Country" options='{"no_open": True, "no_create": True}'/>
                            </div>
                        </group>
                        <group>
                            <label for="contact_name"/>
                            <div>
                                <field name="contact_name" class="oe_inline"/><span attrs="{'invisible': [('title', '=', '')]}">, </span>
                                <field name="title" placeholder="Title" domain="[('domain', '=', 'contact')]" class="oe_inline" options='{"no_open": True}'/>
                            </div>
                            <field name="email_from" widget="email"/>
                            <field name="phone"/>
                            <field name="mobile"/>
                            <field name="fax"/>
                        </group>
                        <group>
                            <field name="user_id" />
                        </group>
                        <group>
                            <field name="priority" widget="priority"/>
                        </group>
                    </group>
					<group>
						<field name="product_line"  >
							<tree editable="bottom" >
								<field name="product_id"/>
								<field name="description"/>
							</tree>
						</field>
					</group>
                    <notebook colspan="4">
                    <page string="Internal Notes">
                        <field name="description"/>
                    </page>
                    </notebook>
                </sheet>
            </form>
        </field>
        </record>

        <!-- CRM Lead Tree View -->
        <record model="ir.ui.view" id="crm_case_tree_view_leads">
            <field name="name">Leads</field>
            <field name="model">panipat.crm.lead</field>
            <field name="arch" type="xml">
                <tree string="Leads">
                    <field name="create_date"/>
                    <field name="sequence"/>
                    <field name="name"/>
                    <field name="contact_name"/>
                    <field name="user_id" />
                    <field name="partner_id"/>
                </tree>
            </field>
        </record>

        <!-- CRM Lead Search View -->
        <record id="view_crm_case_leads_filter" model="ir.ui.view">
            <field name="name">CRM - Leads Search</field>
            <field name="model">panipat.crm.lead</field>
            <field name="arch" type="xml">
                <search string="Search Leads">
                    <field name="name" string="Lead / Customer" filter_domain="['|','|','|',('partner_name','ilike',self),('email_from','ilike',self),('contact_name','ilike',self),('name','ilike',self)]"/>
                    <field name="user_id"/>
                    <field name="partner_id" operator="child_of"/>
                    <field name="create_date"/>
                    <field name="country_id"/>
                    <separator/>
                    <filter string="My Leads"
                            domain="[('user_id','=',uid)]"
                            help="Leads that are assigned to me"/>
                    <filter string="Unassigned" name="unassigned"
                            domain="[('user_id','=', False)]"
                            help="No salesperson"/>
                    <separator />
                    <group expand="0" string="Group By">
                        <filter string="Salesperson" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter string="Customer" help="Partner" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter string="Creation Month" domain="[]" context="{'group_by':'create_date'}"/>
                    </group>
                </search>
            </field>
        </record>
	
	<record id="action_crm_lead" model="ir.actions.act_window">
            <field name="name">Leads</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">panipat.crm.lead</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
	
	
	<menuitem id="panipat_main_menu" sequence="1" name="Panipat Handloom" />
	<menuitem id="panipat_main_menu_item" name="Panipat Handloom" parent="panipat_main_menu" />
	<menuitem id="submenu_item_leads" name="Leads" parent="panipat_main_menu_item" sequence="1" action="action_crm_lead"/>
    
    
    </data>
</openerp>